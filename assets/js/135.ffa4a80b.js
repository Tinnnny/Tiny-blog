(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{489:function(a,s,t){"use strict";t.r(s);var e=t(25),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"classpath和jar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#classpath和jar"}},[a._v("#")]),a._v(" classpath和jar")]),a._v(" "),t("h2",{attrs:{id:"概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[a._v("#")]),a._v(" 概述")]),a._v(" "),t("p",[t("code",[a._v("classpath")]),a._v("是JVM用到的一个环境变量，是一组目录的集合，用来指示JVM如何搜索java文件对应的class文件。")]),a._v(" "),t("p",[a._v("假设"),t("code",[a._v("classpath")]),a._v("是"),t("code",[a._v(".;C:\\work\\project1\\bin;C:\\shared")]),a._v("，那JVM在加载"),t("code",[a._v("abc.xyz.Hello")]),a._v("这个类时，会依次查找：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("<当前目录>\\abc\\xyz\\Hello.class")])]),a._v(" "),t("li",[t("code",[a._v("C:\\work\\project1\\bin\\abc\\xyz\\Hello.class")])]),a._v(" "),t("li",[t("code",[a._v("C:\\shared\\abc\\xyz\\Hello.class")])])]),a._v(" "),t("p",[a._v("如果JVM在某个路径下找到了对应的class文件，就不再往后继续搜索。如果所有路径下都没有找到，就报错。")]),a._v(" "),t("p",[t("code",[a._v("classpath")]),a._v("的搜索路径与操作系统相关。在Windows系统上，用"),t("code",[a._v(";")]),a._v('分隔，带空格的目录用""括起来：')]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\work\\project1\\bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\shared"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:\\My Documents\\project1\\bin"')]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("在Linux系统上，用:分隔，可能长这样：")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("shared"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("local"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("home"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("liaoxuefeng"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("bin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"classpath的设定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#classpath的设定"}},[a._v("#")]),a._v(" classpath的设定")]),a._v(" "),t("ol",[t("li",[a._v("在系统环境变量中设置"),t("code",[a._v("classpath")]),a._v("环境变量，不推荐；")]),a._v(" "),t("li",[a._v("在启动JVM时设置"),t("code",[a._v("classpath")]),a._v("变量，推荐。")])]),a._v(" "),t("p",[a._v("在启动JVM时设置"),t("code",[a._v("classpath")]),a._v("实际上就是给java命令传入"),t("code",[a._v("-classpath")]),a._v("或"),t("code",[a._v("-cp")]),a._v("参数：")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("java "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("classpath "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\work\\project1\\bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\shared abc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("xyz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Hello")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//或")]),a._v("\njava "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("cp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\work\\project1\\bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("C")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v("\\shared abc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("xyz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Hello")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("JVM默认的classpath为当前目录。在IDE中运行Java程序，IDE自动传入的"),t("code",[a._v("-cp")]),a._v("参数是当前工程的bin目录和引入的jar包。")]),a._v(" "),t("blockquote",[t("p",[a._v("🔔:不要把任何Java核心库添加到classpath中！JVM根本不依赖classpath加载核心库！")])]),a._v(" "),t("p",[a._v("一般不用特意设置"),t("code",[a._v("classpath")]),a._v(",默认的当前目录对大多数情况都够用了。")]),a._v(" "),t("h2",{attrs:{id:"jar包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jar包"}},[a._v("#")]),a._v(" jar包")]),a._v(" "),t("p",[a._v("jar包可以把package组织的目录层级，以及各个目录下的所有文件（包括"),t("code",[a._v(".class")]),a._v("文件）都打包，便于管理。实际上就是一个zip格式的压缩文件。")]),a._v(" "),t("p",[a._v("jar包是可以执行的，比如：")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("java "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("cp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("/hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar abc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("xyz"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Hello")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"打包方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打包方式"}},[a._v("#")]),a._v(" 打包方式")]),a._v(" "),t("p",[t("strong",[a._v("先直接压缩成一个zip文件，再把后缀改为"),t("code",[a._v(".jar")])]),a._v("。")]),a._v(" "),t("p",[a._v("jar包里的第一层目录不能是bin,他的目录结构应该为：")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1gfn73bhscdj305q05wjr9.jpg",alt:"undefined"}})]),a._v(" "),t("p",[a._v("否则JVM将无法从jar包中查找正确的class。")]),a._v(" "),t("h3",{attrs:{id:"manifest-mf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#manifest-mf"}},[a._v("#")]),a._v(" "),t("code",[a._v("MANIFEST.MF")])]),a._v(" "),t("p",[a._v("jar包还可以包含一个特殊的"),t("code",[a._v("/META-INF/MANIFEST.MF")]),a._v("文件，可以指定Main-Class和其它信息。JVM会自动读取这个"),t("code",[a._v("MANIFEST.MF")]),a._v("文件，这样我们就可以简化执行命令：")]),a._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v("java "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("jar hello"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("blockquote",[t("p",[a._v("🔔:如果一个"),t("code",[a._v("jar包")]),a._v("包含其它"),t("code",[a._v("jar包")]),a._v("，就需要在"),t("code",[a._v("MANIFEST.MF")]),a._v("配置"),t("code",[a._v("classpath")]),a._v("。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);