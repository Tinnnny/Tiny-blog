(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{446:function(s,a,t){"use strict";t.r(a);var n=t(25),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"docker-compose-部署-gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-部署-gitlab"}},[s._v("#")]),s._v(" Docker Compose 部署 GitLab")]),s._v(" "),t("h2",{attrs:{id:"什么是-gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-gitlab"}},[s._v("#")]),s._v(" 什么是 GitLab")]),s._v(" "),t("p",[s._v("GitLab 是利用 Ruby on Rails 一个开源的版本管理系统，实现一个自托管的 Git 项目仓库，可通过 Web 界面进行访问公开的或者私人项目。它拥有与 Github 类似的功能，能够浏览源代码，管理缺陷和注释。可以管理团队对仓库的访问，它非常易于浏览提交过的版本并提供一个文件历史库。团队成员可以利用内置的简单聊天程序 (Wall) 进行交流。它还提供一个代码片段收集功能可以轻松实现代码复用，便于日后有需要的时候进行查找。")]),s._v(" "),t("h2",{attrs:{id:"部署-gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署-gitlab"}},[s._v("#")]),s._v(" 部署 GitLab")]),s._v(" "),t("p",[s._v("我们使用 Docker 来安装和运行 GitLab 中文版，"),t("code",[s._v("docker-compose.yml")]),s._v(" 配置如下：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("version: '3'\nservices:\n    web:\n      image: 'twang2218/gitlab-ce-zh'\n      restart: always\n      hostname: '192.168.75.145'\n      environment:\n        TZ: 'Asia/Shanghai'\n        GITLAB_OMNIBUS_CONFIG: |\n          external_url 'http://192.168.75.145'\n          gitlab_rails['gitlab_shell_ssh_port'] = 2222\n          unicorn['port'] = 8888\n          nginx['listen_port'] = 80\n      ports:\n        - '80:80'\n        - '443:443'\n        - '2222:22'\n      volumes:\n        - ./config:/etc/gitlab\n        - ./data:/var/opt/gitlab\n        - ./logs:/var/log/gitlab\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("h2",{attrs:{id:"配置-gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-gitlab"}},[s._v("#")]),s._v(" 配置 GitLab")]),s._v(" "),t("p",[s._v("访问地址：http://ip:8080")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwj8vhlij30th0erwex.jpg"}})]),s._v("\n- 设置管理员初始密码，这里的密码最好是 字母 + 数字组合，并且大于等于 8 位\n- 配置完成后登录，管理员账号是 root\n"),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwk45nsrj30t70fv3yy.jpg"}})]),s._v(" "),t("blockquote",[t("p",[s._v("注意： 如果服务器配置较低，启动运行可能需要较长时间，请耐心等待")])]),s._v(" "),t("h2",{attrs:{id:"设置-gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置-gitlab"}},[s._v("#")]),s._v(" 设置 GitLab")]),s._v(" "),t("p",[s._v("第一次使用时可以做一些初始化设置，点击 管理区域 -> 设置")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwkzhrlaj312i0a73yp.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("关闭头像功能，由于 Gravatar 头像为网络头像，在网络情况不理想时可能导致访问时卡顿")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwlsogdqj312i0a73yp.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("由于是内部代码托管服务器，可以直接关闭注册功能，由管理员统一创建用户即可")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwmhazp3j313a0ciglt.jpg"}})]),s._v(" "),t("h2",{attrs:{id:"账户管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#账户管理"}},[s._v("#")]),s._v(" 账户管理")]),s._v(" "),t("p",[s._v("使用时请不要直接通过 root 用户操作，需要先创建用户，然后通过创建的用户操作，如果你是管理员还需要为其他开发人员分配账户")]),s._v(" "),t("ul",[t("li",[s._v("创建账户，点击 管理区域 -> 新建用户")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwnhg0xjj314g0m2gmt.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("设置账户信息，同时你可以将自己设置为管理员")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwo2jh8pj314x0oo74t.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("修改用户密码，由于我们创建时并没有配置邮箱，所以还需要重新编辑用户信息并手动设置密码")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwoqwopfj314x0ezwf1.jpg"}})]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwp6cp61j314i0heglv.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("退出并使用新账户登录")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwpq7jxkj30i109udft.jpg"}})]),s._v(" "),t("blockquote",[t("p",[s._v("注意： 创建完账户，第一次登录时还会提示你修改登录密码")])]),s._v(" "),t("h2",{attrs:{id:"项目管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目管理"}},[s._v("#")]),s._v(" 项目管理")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("点击 + 号 -> 新建项目\n")]),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwqhbq8qj30v508g74g.jpg"}})]),t("p")]),s._v(" "),t("li",[t("p",[s._v("输入项目名称及描述信息，设置可见等级为私有，这样别人就看不见你的项目")])])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwr86wdlj314g0itt9k.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("我们选择通过增加一个 README 的方式来初始化项目")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwrtnt9sj30yq0ha74u.jpg"}})]),s._v(" "),t("ul",[t("li",[s._v("直接提交修改即可")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwsbm93aj312c0ouaaf.jpg"}})]),s._v(" "),t("h2",{attrs:{id:"使用-ssh-方式拉取和推送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-ssh-方式拉取和推送"}},[s._v("#")]),s._v(" 使用 SSH 方式拉取和推送")]),s._v(" "),t("h3",{attrs:{id:"生成-ssh-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成-ssh-key"}},[s._v("#")]),s._v(" 生成 SSH KEY")]),s._v(" "),t("p",[s._v("使用 ssh-keygen 工具生成，位置在 Git 安装目录下，我的是 C:\\Program Files\\Git\\usr\\bin，输入命令：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ssh-keygen -t rsa -C "your_email@example.com"\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("执行成功后的效果：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('Microsoft Windows [版本 10.0.14393]\n(c) 2016 Microsoft Corporation。保留所有权利。\nC:\\Program Files\\Git\\usr\\bin>ssh-keygen -t rsa -C "topsale@vip.qq.com"\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/c/Users/Lusifer/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /c/Users/Lusifer/.ssh/id_rsa.\nYour public key has been saved in /c/Users/Lusifer/.ssh/id_rsa.pub.\nThe key fingerprint is:\nSHA256:cVesJKa5VnQNihQOTotXUAIyphsqjb7Z9lqOji2704E topsale@vip.qq.com\nThe key\'s randomart image is:\n+---[RSA 2048]----+\n|  + ..=o=.  .+.  |\n| o o + B .+.o.o  |\n|o   . + +=o+..   |\n|.=   .  oo...    |\n|= o     So       |\n|oE .    o        |\n| .. .. .         |\n| o*o+            |\n| *B*oo           |\n+----[SHA256]-----+\nC:\\Program Files\\Git\\usr\\bin>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h3",{attrs:{id:"复制-ssh-key-信息到-gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#复制-ssh-key-信息到-gitlab"}},[s._v("#")]),s._v(" 复制 SSH-KEY 信息到 GitLab")]),s._v(" "),t("p",[s._v("密钥位置在："),t("code",[s._v("C:\\Users\\你的用户名\\.ssh")]),s._v(" 目录下，找到 "),t("code",[s._v("id_rsa.pub")]),s._v(" 并使用编辑器打开，如：\n")]),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwu8rdorj30r307l3yy.jpg"}})]),t("p"),s._v(" "),t("p",[s._v("登录 GitLab，点击“用户头像”--\x3e“设置”--\x3e“SSH 密钥”")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwuq6y6wj315a0i574w.jpg"}})]),s._v(" "),t("p",[s._v("成功增加密钥后的效果")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwv43ancj30wf0i1aai.jpg"}})]),s._v(" "),t("h2",{attrs:{id:"使用-tortoisegit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用-tortoisegit"}},[s._v("#")]),s._v(" 使用 TortoiseGit")]),s._v(" "),t("h3",{attrs:{id:"克隆项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#克隆项目"}},[s._v("#")]),s._v(" 克隆项目")]),s._v(" "),t("ul",[t("li",[s._v("新建一个存放代码仓库的本地文件夹")]),s._v(" "),t("li",[s._v("在文件夹空白处按右键")]),s._v(" "),t("li",[s._v("选择 Git 克隆...")])]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lww9u9mxj30710bhjrf.jpg"}})]),s._v(" "),t("p",[s._v("复制项目地址到 URL")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwx7cup7j30hk0aq3yl.jpg"}})]),s._v(" "),t("p",[s._v("如果弹出连接信息请选择是")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwxjj1fzj30d806g0so.jpg"}})]),s._v(" "),t("p",[s._v("成功克隆项目到本地")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwxswuamj30g70bm74h.jpg"}})]),s._v(" "),t("h3",{attrs:{id:"推送项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#推送项目"}},[s._v("#")]),s._v(" 推送项目")]),s._v(" "),t("ul",[t("li",[s._v("创建或修改文件（这里的文件为所有文件，包括：代码、图片等）")]),s._v(" "),t("li",[s._v("我们以创建 "),t("code",[s._v(".gitignore")]),s._v(" 过滤配置文件为例，该文件的主要作用为过滤不需要上传的文件，比如：IDE 生成的工程文件、编译后的 class 文件等")]),s._v(" "),t("li",[s._v("在工程目录下，新建 "),t("code",[s._v(".gitignore")]),s._v(" 文件，并填入如下配置")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("target/\n!.mvn/wrapper/maven-wrapper.jar\n## STS ##\n.apt_generated\n.classpath\n.factorypath\n.project\n.settings\n.springBeans\n## IntelliJ IDEA ##\n.idea\n*.iws\n*.iml\n*.ipr\n## JRebel ##\nrebel.xml\n## MAC ##\n.DS_Store\n## Other ##\nlogs/\ntemp/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[s._v("右键呼出菜单，选择 提交 Master...")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwz3o2v7j30720bht8q.jpg"}})]),s._v(" "),t("p",[s._v("点击 全部 并填入 日志信息")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwzc6szgj30my0iygmb.jpg"}})]),s._v(" "),t("p",[s._v("点击 提交并推送")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lwzxuwdgj30mu02udfo.jpg"}})]),s._v(" "),t("p",[s._v("成功后的效果图")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lx0cte1gj30g70bmaa8.jpg"}})]),s._v(" "),t("h3",{attrs:{id:"查看-gitlab-确认提交成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看-gitlab-确认提交成功"}},[s._v("#")]),s._v(" 查看 GitLab 确认提交成功")]),s._v(" "),t("div",{attrs:{align:"center"}},[t("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8lx0tar2aj30zj0ku3zc.jpg"}})])])}),[],!1,null,null,null);a.default=r.exports}}]);