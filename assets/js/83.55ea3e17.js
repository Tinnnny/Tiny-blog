(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{437:function(s,n,a){"use strict";a.r(n);var e=a(25),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"安装-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker"}},[s._v("#")]),s._v(" 安装 Docker")]),s._v(" "),a("h2",{attrs:{id:"平台支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#平台支持"}},[s._v("#")]),s._v(" 平台支持")]),s._v(" "),a("h3",{attrs:{id:"桌面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#桌面"}},[s._v("#")]),s._v(" 桌面")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("平台")]),s._v(" "),a("th",[s._v("架构")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("Docker Desktop for Mac (macOS)")]),s._v(" "),a("td",[s._v("X64")])]),s._v(" "),a("tr",[a("td",[s._v("Docker Desktop for Windows (Microsoft Windows 10)")]),s._v(" "),a("td",[s._v("X64")])])])]),s._v(" "),a("h3",{attrs:{id:"服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器"}},[s._v("#")]),s._v(" 服务器")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("平台")]),s._v(" "),a("th",[s._v("x86_64 / amd64")]),s._v(" "),a("th",[s._v("ARM")]),s._v(" "),a("th",[s._v("ARM64 / AARCH64")]),s._v(" "),a("th",[s._v("IBM Power (ppc64le)")]),s._v(" "),a("th",[s._v("IBM Z (s390x)")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("CentOS")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("Debian")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td"),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("Fedora")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td"),s._v(" "),a("td"),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("Ubuntu")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")]),s._v(" "),a("td",[s._v("✔")])])])]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("h3",{attrs:{id:"_1-卸载旧版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载旧版本"}},[s._v("#")]),s._v(" 1.卸载旧版本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apt-get remove docker docker-engine docker.io containerd runc\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-使用-apt-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用-apt-安装"}},[s._v("#")]),s._v(" 2.使用 APT 安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('# 更新数据源\napt-get update\n# 安装所需依赖\napt-get -y install apt-transport-https ca-certificates curl software-properties-common\n# 安装 GPG 证书\ncurl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -\n# 新增数据源\nadd-apt-repository "deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable"\n# 更新并安装 Docker CE\napt-get update && apt-get install -y docker-ce\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_3-验证安装是否成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-验证安装是否成功"}},[s._v("#")]),s._v(" 3.验证安装是否成功")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker version\n# 输出如下\nClient:\nVersion:           18.09.6\n API version:       1.39\n Go version:        go1.10.8\n Git commit:        481bc77\n Built:             Sat May  4 02:35:57 2019\n OS/Arch:           linux/amd64\n Experimental:      false\nServer: Docker Engine - Community\n Engine:\n  Version:          18.09.6\n  API version:      1.39 (minimum version 1.12)\n  Go version:       go1.10.8\n  Git commit:       481bc77\n  Built:            Sat May  4 01:59:36 2019\n  OS/Arch:          linux/amd64\n  Experimental:     false\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h2",{attrs:{id:"配置-docker-镜像加速器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-docker-镜像加速器"}},[s._v("#")]),s._v(" 配置 Docker 镜像加速器")]),s._v(" "),a("p",[s._v("1.阿里云加速器（推荐）\n2.官方提供中国区镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://registry.docker-cn.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"配置阿里云加速器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置阿里云加速器"}},[s._v("#")]),s._v(" 配置阿里云加速器")]),s._v(" "),a("p",[s._v("首先 登录阿里云（没有账号请先注册），搜索 容器镜像服务。\n")]),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8k1c3s75gj314u0hddh5.jpg"}})]),s._v("\n找到自己的专属加速器\n"),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8k1cuivnij30z90k2755.jpg"}})]),s._v("\n通过修改 daemon 配置文件 "),a("code",[s._v("/etc/docker/daemon.json")]),s._v("来使用加速器"),a("p"),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('tee /etc/docker/daemon.json <<-\'EOF\'\n{\n  "registry-mirrors": ["https://kk7wx24z.mirror.aliyuncs.com/"]\n}\nEOF\n# 重启 Docker\nsystemctl daemon-reload\nsystemctl restart docker\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("验证配置是否成功")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker info\n# 输出如下\nContainers: 38\n Running: 18\n Paused: 0\n Stopped: 20\nImages: 10\nServer Version: 18.09.6\nStorage Driver: overlay2\n Backing Filesystem: extfs\n Supports d_type: true\n Native Overlay Diff: true\nLogging Driver: json-file\nCgroup Driver: cgroupfs\nPlugins:\n Volume: local\n Network: bridge host macvlan null overlay\n Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog\nSwarm: inactive\nRuntimes: runc\nDefault Runtime: runc\nInit Binary: docker-init\ncontainerd version: bb71b10fd8f58240ca47fbb579b9d1028eea7c84\nrunc version: 2b18fe1d885ee5083ef9f0838fee39b62d653e30\ninit version: fec3683\nSecurity Options:\n apparmor\n seccomp\n  Profile: default\nKernel Version: 4.15.0-51-generic\nOperating System: Ubuntu 18.04.2 LTS\nOSType: linux\nArchitecture: x86_64\nCPUs: 2\nTotal Memory: 1.924GiB\nName: kubernetes-master\nID: PJ4H:7AF2:P5UT:6FMR:W4DI:SSWR:IQQR:J6QO:ARES:BOAC:ZVMO:SV2Y\nDocker Root Dir: /var/lib/docker\nDebug Mode (client): false\nDebug Mode (server): false\nRegistry: https://index.docker.io/v1/\nLabels:\nExperimental: false\nInsecure Registries:\n 127.0.0.0/8\n## 这里是你配置的镜像加速器\nRegistry Mirrors:\n https://kk7wx24z.mirror.aliyuncs.com/\nLive Restore Enabled: false\nProduct License: Community Engine\nWARNING: No swap limit support\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])]),a("h3",{attrs:{id:"运行第一个容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行第一个容器"}},[s._v("#")]),s._v(" 运行第一个容器")]),s._v(" "),a("p",[s._v("我们以 Nginx 为例，体验 Docker 是如何运行容器的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 下载镜像\ndocker pull nginx\n# 运行容器\ndocker run --name nginx-container -p 80:80 -d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("浏览器输入虚拟机地址即可访问 Nginx\n")]),a("div",{attrs:{align:"center"}},[a("img",{attrs:{src:"http://ww1.sinaimg.cn/large/007Rnr4nly1g8k1ndtxtyj30mi07p3yz.jpg"}})]),a("p"),s._v(" "),a("h2",{attrs:{id:"其它安装方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它安装方法"}},[s._v("#")]),s._v(" 其它安装方法")]),s._v(" "),a("h3",{attrs:{id:"_1-安装命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装命令"}},[s._v("#")]),s._v(" 1.安装命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo apt install docker.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-解决普通用户不能直接使用-docker-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-解决普通用户不能直接使用-docker-命令"}},[s._v("#")]),s._v(" 2.解决普通用户不能直接使用 docker 命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker ps\nGot permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.39/containers/json: dial unix /var/run/docker.sock: connect: permission denied\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 创建 docker 用户组\nsudo groupadd docker\n# 添加当前用户到 docker 组\nsudo usermod -aG docker $USER\n# 重启 docker\nsudo systemctl restart docker\nnewgrp - docker\n# 重启系统\nsudo reboot\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);