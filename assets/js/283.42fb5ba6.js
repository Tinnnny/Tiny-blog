(window.webpackJsonp=window.webpackJsonp||[]).push([[283],{636:function(s,n,a){"use strict";a.r(n);var t=a(25),e=Object(t.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"matlab进阶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#matlab进阶"}},[s._v("#")]),s._v(" MATLAB进阶")]),s._v(" "),a("h2",{attrs:{id:"matlab程序调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#matlab程序调试"}},[s._v("#")]),s._v(" MATLAB程序调试")]),s._v(" "),a("ol",[a("li",[s._v("Index must be a positive integer or logical.")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MATLAB下标是从1开始的\n A = [1 2 3 4 5];\n A(0)\n A(3.5)\n A(-2)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("Undefined function or variable 'B'.\nB未定义")])]),s._v(" "),a("li",[a("p",[s._v("Inner matrix dimensions must agree.\n矩阵维度一定要相符合。")])]),s._v(" "),a("li",[a("p",[s._v("Function definitions are not permitted at the prompt or in scripts.")])]),s._v(" "),a("li",[a("p",[s._v("Index out of bounds because numel(A)=5.\n数组越界")])]),s._v(" "),a("li",[a("p",[s._v("In an assignment  A(I) = B, the number of elements in B and I must be the same.\n赋值时维度必须相同")])]),s._v(" "),a("li",[a("p",[s._v("Expression or statement is incorrect--possibly unbalanced (, {, or [.\n括号使用出错。")])]),s._v(" "),a("li",[a("p",[s._v("Too many input arguments.\n输入参数太多")])])]),s._v(" "),a("h2",{attrs:{id:"断点调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#断点调试"}},[s._v("#")]),s._v(" 断点调试")]),s._v(" "),a("p",[s._v("matlab的调试和Java差不多。")]),s._v(" "),a("h2",{attrs:{id:"向量化编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#向量化编程"}},[s._v("#")]),s._v(" 向量化编程")]),s._v(" "),a("h3",{attrs:{id:"及时清除不用的变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#及时清除不用的变量"}},[s._v("#")]),s._v(" 及时清除不用的变量")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("a = rand(10000);\nb = rand(10000);\nclear a\nb = rand(10000);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"使用变量前，预分配内存空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用变量前，预分配内存空间"}},[s._v("#")]),s._v(" 使用变量前，预分配内存空间")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("clear all\nclc\nn = 30000;\ntic;\nfor k = 1:n\n    a(k) = 1;\nend\ntime = toc;\ndisp(['未预分配内存下动态赋值长为',num2str(n),'的数组时间是:',num2str(time),'秒！'])\n\ntic\nb = zeros(1,n);\nfor k = 1:n\n    b(k) = 1;\nend\ntime = toc;\ndisp(['预分配内存下动态赋值长为',num2str(n),'的数组时间是:',num2str(time),'秒！'])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"选择恰当的数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择恰当的数据类型"}},[s._v("#")]),s._v(" 选择恰当的数据类型")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("clear all\nclc\nn = 300000;\na = 8;\nb{1} = 8;\nc.data = 8;\n\ntic\nfor k = 1:n;\n    a;\nend\ntime = toc;\ndisp(['访问',num2str(n),'次double型数组时间是:',num2str(time),'秒！'])\n\ntic\nfor k = 1:n;\n    b{1};\nend\ntime = toc;\ndisp(['访问',num2str(n),'次cell型数组时间是:',num2str(time),'秒！'])\n\ntic\nfor k = 1:n;\n    c.data;\nend\ntime = toc;\ndisp(['访问',num2str(n),'次struct型数组时间是:',num2str(time),'秒！'])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h2",{attrs:{id:"图像对象和句柄"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#图像对象和句柄"}},[s._v("#")]),s._v(" 图像对象和句柄")]),s._v(" "),a("ol",[a("li",[s._v("如何设置线条的属性呢？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = 0:0.01:2*pi;\ny = sin(x);\nh = plot(x,y);\ngrid on\nget(h)\nset(h,'linestyle','-','linewidth',2,'color','k')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("如何修改网格的间隔呢？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set(gca,'xtick',0:0.5:7)\nset(gca,'ytick',-1:0.1:1)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("如何设置图例的字体及大小呢？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = 0:0.01:2*pi;\ny1 = sin(x);\ny2 = cos(x);\nplot(x,y1,'r')\nhold on\nplot(x,y2,'-.b')\nh = legend('sin(x)','cos(x)');\nset(h,'fontsize',16,'color','k','edgecolor','r','textcolor','w')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("如何拆分图例呢？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("x = 0:0.01:2*pi;\ny1 = sin(x);\ny2 = cos(x);\nh1 = plot(x,y1,'r');\nhold on\nh2 = plot(x,y2,'-.b');\nax1 = axes('position',get(gca,'position'),'visible','off');\nlegend(ax1,h1,'sin(x)','location','northwest')\nax2 = axes('position',get(gca,'position'),'visible','off');\nlegend(ax2,h2,'cos(x)','location','northeast')\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"bp神经网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bp神经网络"}},[s._v("#")]),s._v(" Bp神经网络")]),s._v(" "),a("h3",{attrs:{id:"训练集-测试集产生"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#训练集-测试集产生"}},[s._v("#")]),s._v(" 训练集/测试集产生")]),s._v(" "),a("ol",[a("li",[s._v("导入数据")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("load spectra_data.mat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("随机产生训练集和测试集")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("temp = randperm(size(NIR,1));\n% 训练集——50个样本\nP_train = NIR(temp(1:50),:)';\nT_train = octane(temp(1:50),:)';\n% 测试集——10个样本\nP_test = NIR(temp(51:end),:)';\nT_test = octane(temp(51:end),:)';\nN = size(P_test,2);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"数据归一化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据归一化"}},[s._v("#")]),s._v(" 数据归一化")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[p_train, ps_input] = mapminmax(P_train,0,1);\np_test = mapminmax('apply',P_test,ps_input);\n\n[t_train, ps_output] = mapminmax(T_train,0,1);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"bp神经网络创建、训练及仿真测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bp神经网络创建、训练及仿真测试"}},[s._v("#")]),s._v(" BP神经网络创建、训练及仿真测试")]),s._v(" "),a("ol",[a("li",[s._v("创建网络")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("net = newff(p_train,t_train,9);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("设置训练参数")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("net.trainParam.epochs = 1000;\nnet.trainParam.goal = 1e-3;\nnet.trainParam.lr = 0.01;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("训练网络")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("net = train(net,p_train,t_train);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("仿真测试")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("t_sim = sim(net,p_test);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"5"}},[a("li",[s._v("数据反归一化")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("T_sim = mapminmax('reverse',t_sim,ps_output);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"性能评价"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能评价"}},[s._v("#")]),s._v(" 性能评价")]),s._v(" "),a("ol",[a("li",[s._v("相对误差error")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("error = abs(T_sim - T_test)./T_test;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("决定系数R^2")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("R2 = (N * sum(T_sim .* T_test) - sum(T_sim) * sum(T_test))^2 / ((N * sum((T_sim).^2) - (sum(T_sim))^2) * (N * sum((T_test).^2) - (sum(T_test))^2)); \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("结果对比")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("result = [T_test' T_sim' error']\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"绘图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#绘图"}},[s._v("#")]),s._v(" 绘图")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("figure\nplot(1:N,T_test,'b:*',1:N,T_sim,'r-o')\nlegend('真实值','预测值')\nxlabel('预测样本')\nylabel('辛烷值')\nstring = {'测试集辛烷值含量预测结果对比';['R^2=' num2str(R2)]};\ntitle(string)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//size(wineTargets,2)表示返回第二个变量的列数\nfor i=1:1:size(wineTargets,2)\n    output1(i)=find(wineTargets(:,i)==max(wineTargets(:,i)));\nend\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("max函数\nA=[0 0 1]\n[a b]=max(A)\na=1 b=3\n其中a代表最大值，b代表最大值的索引，这样就可以进行分类。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("代码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("%% 此程序matlab编程实现的BP神经网络\n% 清空环境变量\nclear all\nclc\n\n%%第一步 读取数据\ninput=xlsread('input.xlsx');\noutput=xlsread('output.xlsx');\n\n% 将二进制转为10进制分类\nfor i=1:1:size(output,2)\n    output1(i)=find(output(:,i)==max(output(:,i)));\nend\n%% 第二步 设置训练数据和预测数据\ninput_train = input(:,[1:160]);\noutput_train =output(:,[1:160]);\ninput_test = input(:,[161:200]);\noutput_test =output(:,[161:200]);\n\ntrain_output1=output1([1:160]);\ntest_output1=output1([161:200]);\n%节点个数\ninputnum=size(input_train,1); % size(X,1)返回的是矩阵X的行数\nhiddennum=10;%隐含层节点数量经验公式p=sqrt(m+n)+a ，故分别取2~13进行试验\noutputnum=size(output_train,1);\n%% 第三本 训练样本数据归一化\n[inputn,inputps]=mapminmax(input_train);%归一化到[-1,1]之间，inputps用来作下一次同样的归一化\n[outputn,outputps]=mapminmax(output_train);\n%% 第四步 构建BP神经网络\nnet=newff(inputn,outputn,hiddennum,{'tansig','purelin'},'trainlm');% 建立模型，传递函数使用purelin，采用梯度下降法训练\n\nW1= net.iw{1,1};%输入层到中间层的权值\nB1 = net.b{1};%中间各层神经元阈值\n\nW2 = net.lw{2,1};%中间层到输出层的权值\nB2 = net.b{2};%输出层各神经元阈值\n\n%% 第五步 网络参数配置（ 训练次数，学习速率，训练目标最小误差等）\nnet.trainParam.epochs=500;         % 训练次数，这里设置为1000次\nnet.trainParam.lr=0.01;                   % 学习速率，这里设置为0.01\nnet.trainParam.goal=0.01;                    % 训练目标最小误差，这里设置为0.00001\nnet.trainParam.show=50;\nnet.trainParam.mc=0.01;\nnet.trainParam.max_fail=6;\n%% 第六步 BP神经网络训练\n[net,tr]=train(net,inputn,outputn);%开始训练，其中inputn,outputn分别为输入输出样本\nfigure(1),plotperform(tr) %误差MSE下降线\n\n%训练集的输出\nan0=sim(net,inputn); % 仿真得到预测的输出\naaa=size(an0,2);\ntrain_simu=mapminmax('reverse',an0,outputps); % 返归一化\n\n%% 计算训练集分类结果和误差\nfor i=1:1:aaa\n    train_output(i)=find(train_simu(:,i)==max(train_simu(:,i)));\nend\n\nerror0=train_output-train_output1;\n%% 第七步 测试样本归一化\ninputn_test=mapminmax('apply',input_test,inputps);% 对样本数据进行归一化\n\n%% 第八步 BP神经网络预测\nan1=sim(net,inputn_test); %用训练好的模型进行仿真\nbbb=size(an1,2);\ntest_simu=mapminmax('reverse',an1,outputps); % 把仿真得到的数据还原为原始的数量级\n\n%% 计算测试集分类结果和误差\nfor i=1:1:bbb\n    test_output(i)=find(test_simu(:,i)==max(test_simu(:,i)));\nend\n\nerror=test_output-test_output1; % 计算测试集分类的误差\n\n%% 网络预测图形\n% 找出判断错误的分类属于哪一类\nk=zeros(1,5);\nfor i=1:bbb\n    if error(i)~=0\n        [b c]=max(output_test(:,i));\n        switch c\n            case 1\n                k(1)= k(1)+1;\n            case 2\n                k(2)= k(2)+1;\n            case 3\n                k(3)= k(3)+1;\n            case 4\n                k(4)= k(4)+1;\n            case 5\n                k(5)= k(5)+1;\n        end\n    end\nend\ndisp(k)\n% 找出每类的个体和\nkk=zeros(1,5);\nfor i=1:bbb\n    [b c]=max(output_test(:,i));\n    switch c\n        case 1\n            kk(1)= kk(1)+1;\n        case 2\n            kk(2)= kk(2)+1;\n        case 3\n            kk(3)= kk(3)+1;\n        case 4\n            kk(4)= kk(4)+1;\n        case 5\n            kk(5)= kk(5)+1;\n    end\nend\ndisp(kk)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br")])]),a("p",[s._v("现在可能出现的问题梳理：")]),s._v(" "),a("ol",[a("li",[s._v("数据有问题")]),s._v(" "),a("li",[s._v("学习率和激活函数有问题")])]),s._v(" "),a("p",[s._v("矩阵化代码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("% 清空环境变量\nclear all\nclc\ndata=xlsread('8分类.xlsx');\ninput=data(1,:);  %载入输入数据\nc=zeros(5,size(input,2));%初始化存储矩阵\n\nfor i=1:1:size(input,2)\n    c(input(1,i),i)=1;\nend\nxlswrite('data1.xlsx',c)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ol",[a("li",[s._v("不吃外卖，不喝饮料")]),s._v(" "),a("li",[s._v("每天学习，每天运动")])])])}),[],!1,null,null,null);n.default=e.exports}}]);